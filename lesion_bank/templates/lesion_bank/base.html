{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Joseph Turner">

    <!-- This might need to be dynamically generated by Django -->
    <title>{{ title }}</title> 

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Bootstrap Icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- Papaya & jQuery -->
    <link rel='stylesheet' type='text/css' href='https://cdn.jsdelivr.net/gh/rii-mango/Papaya@build-1449/release/current/minimal/papaya.css'/>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/rii-mango/Papaya@build-1455/release/current/minimal/papaya.js"></script> -->
    
    <!-- DataTables Bootstrap Integration -->
    
    <!-- DataTables Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">

    <!-- DataTables Buttons Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css">

    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>

    <!-- DataTables Bootstrap 5 integration -->
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

    <!-- FixedHeader JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js"></script>

    <!-- FixedHeader CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.min.css">

    <!-- DataTables Buttons -->
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>

    <!-- Buttons Bootstrap 5 integration -->
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>

    <!-- JSZip for Buttons extension -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- pdfmake for Buttons extension -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>

    <!-- Buttons extensions (HTML5 export, Print view, Column visibility) -->
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>

    <meta name="theme-color" content="#7952b3">


    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        body {
            min-height: 75rem;
            padding-top: 4.5rem;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
        }

        .papaya-menu{
            width: unset !important;
        }

        .dtfh-floatingparenthead{
            background-color:white!important;
        }
        table.table-hover.dataTable.no-footer.fixedHeader-floating {
            margin-top:0 !important;
            margin-bottom:0 !important;
            border-bottom: 1px solid black !important;
        }
    </style>
    {% block style %}
    {% endblock %} 

</head>

<body class="bg-light min-vh-100 d-flex flex-column">
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <div class="container d-flex justify-content-center align-items-center">
        <img src="/static/images/lesion_logo_without_background.png" alt="Logo" class="d-inline-block align-text-top" width="60" height="60">
        <a class="navbar-brand" href="#">Lesion<b>Bank</b></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
                <li class="nav-item">
                    <a class="nav-link {% if page_name == 'Case Studies' %}active{% endif %}" href="{% url 'cases' %}">Case Studies</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if page_name == 'Symptoms' %}active{% endif %}" href="{% url 'symptoms' %}">Symptoms</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if page_name == 'Locations' %}active{% endif %}" href="{% url 'locations_landing' %}">Locations</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if page_name == 'Predict' %}active{% endif %}" href="{% url 'predict' %}">Predict</a>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link {% if page_name == 'About' %}active{% endif %}" href="">About</a> 
                </li> -->
                <li class="nav-item">
                    <a class="nav-link {% if page_name == 'FAQ' %}active{% endif %}" href="{% url 'faq' %}">FAQ</a>
                </li>
            </ul>            
        </div>
    </div>
</nav>
<main class="container">
    <div class="p-5 rounded">
        {% block content %}
        {% endblock %}
    </div>
    {% block content_2 %}
    {% endblock %}
    <br>
    <br>
</main>

<footer class="footer mt-auto py-3 bg-dark">
    <div class="container">
        <span class="text-muted">
            Supported By:
            <b>Brigham Young University</b>
        </span>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script>
    var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    if (!isMobile) {
        var script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/gh/rii-mango/Papaya@build-1455/release/current/minimal/papaya.js'; // Replace with the actual path
        document.head.appendChild(script);
    }
    else {
        document.getElementById("warning_message").innerHTML = "3d visualization is not well supported on mobile devices. Please use a desktop browser for a better experience.";
        document.getElementById("papaya-holder").style.display = "none";
    }
</script>

<!-- Functions for loading overlays -->

<script type="text/javascript">

    function addNewOverlay(link, element){
            if(params[link.split('/').pop()]){
                let viewer = papayaContainers[0].viewer;
                let overlays = viewer.screenVolumes;
                let overlay_list = overlays.map(overlay => overlay.volume.urls[0]);
                if(overlay_list.includes(link)){
                    i = overlay_list.indexOf(link);
                    viewer.toggleOverlay(i);
                }
                else{
                    if(params[link.split('/').pop()].parametric = true){
                        papaya.viewer.Viewer.MAX_OVERLAYS += 2;
                    }
                    else{
                        papaya.viewer.Viewer.MAX_OVERLAYS +=1
                    }
                    viewer.loadOverlay([link],true,false,false);
                }
                if(element instanceof HTMLElement) {
                    element.classList.toggle("bi-square-fill");
                    element.classList.toggle("bi-square");
                }
            }
    }
    function loadFirstOverlay(){
        setTimeout(() => {
            let element = document.getElementById("toggle1");
            let link = element.getAttribute('url')
            addNewOverlay(link, element);
        }, 10);
    }

</script>
{% block script %}
{% endblock %} 
</body>
</html>